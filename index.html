<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scary Bio Site</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; background: #000;
    color: #fff; font-family: monospace; overflow: hidden;
  }
  #enterScreen {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #000;
    cursor: pointer;
    opacity: 0;
    animation: fadeIn 2s forwards;
    font-size: 2em;
    user-select: none;
    color: white;
  }
  #terminal {
    display: none;
    padding: 1em;
    height: 100vh;
    background: #111;
    overflow-y: auto;
    box-sizing: border-box;
  }
  @keyframes fadeIn {
    to { opacity: 1; }
  }
  .fadeOut {
    animation: fadeOut 1s forwards;
  }
  @keyframes fadeOut {
    to { opacity: 0; }
  }
  /* Terminal input styling */
  #inputLine {
    display: flex;
  }
  #prompt {
    margin-right: 0.5em;
  }
  #cmdInput {
    background: transparent;
    border: none;
    outline: none;
    color: #0f0;
    font-family: monospace;
    flex: 1;
  }
</style>
</head>
<body>
<div id="enterScreen">Click to enter</div>
<div id="terminal"></div>

<script>
const enterScreen = document.getElementById('enterScreen');
const terminal = document.getElementById('terminal');

function writeLine(text = '') {
  const line = document.createElement('div');
  line.textContent = text;
  terminal.appendChild(line);
  terminal.scrollTop = terminal.scrollHeight;
}

function writeHtml(html) {
  const line = document.createElement('div');
  line.innerHTML = html;
  terminal.appendChild(line);
  terminal.scrollTop = terminal.scrollHeight;
}

function typeHelp() {
  writeLine('Type help for commands');
}

function initTerminal() {
  terminal.style.display = 'block';
  writeLine('Welcome.');
  typeHelp();
  showInput();
}

function showInput() {
  const inputLine = document.createElement('div');
  inputLine.id = 'inputLine';

  const prompt = document.createElement('span');
  prompt.id = 'prompt';
  prompt.textContent = '>';

  const input = document.createElement('input');
  input.id = 'cmdInput';
  input.autofocus = true;
  input.spellcheck = false;

  inputLine.appendChild(prompt);
  inputLine.appendChild(input);
  terminal.appendChild(inputLine);
  input.focus();
  terminal.scrollTop = terminal.scrollHeight;

  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const cmd = input.value.trim();
      runCommand(cmd);
      input.disabled = true;
      input.remove();
      prompt.textContent = '>';
      writeLine(`> ${cmd}`);
      showInput();
    }
  });
}

function runCommand(cmd) {
  if (!cmd) return;

  switch(cmd.toLowerCase()) {
    case 'help':
      writeLine('Commands: help, snake, clear');
      break;
    case 'clear':
      terminal.innerHTML = '';
      break;
    case 'snake':
      startSnake();
      break;
    default:
      writeLine(`Unknown command: ${cmd}`);
  }
}

// Minimal Snake game implementation
function startSnake() {
  writeLine('Starting Snake game...');
  writeLine('Use arrow keys to play. Press Esc to exit.');
  terminal.innerHTML = ''; // Clear terminal for game

  // Setup canvas for snake game
  const canvas = document.createElement('canvas');
  canvas.width = 300;
  canvas.height = 300;
  canvas.style.background = '#222';
  canvas.style.display = 'block';
  canvas.style.margin = '20px auto';
  terminal.appendChild(canvas);

  const ctx = canvas.getContext('2d');
  const scale = 15;
  const rows = canvas.height / scale;
  const cols = canvas.width / scale;

  let snake = [];
  snake[0] = { x: Math.floor(cols/2), y: Math.floor(rows/2) };

  let food = {
    x: Math.floor(Math.random() * cols),
    y: Math.floor(Math.random() * rows)
  };

  let dx = 0;
  let dy = 0;
  let gameInterval;

  function draw() {
    ctx.fillStyle = '#222';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw food
    ctx.fillStyle = 'red';
    ctx.fillRect(food.x * scale, food.y * scale, scale, scale);

    // Draw snake
    ctx.fillStyle = 'lime';
    for (let part of snake) {
      ctx.fillRect(part.x * scale, part.y * scale, scale, scale);
    }
  }

  function update() {
    const head = { x: snake[0].x + dx, y: snake[0].y + dy };

    // Check collisions
    if (
      head.x < 0 || head.x >= cols ||
      head.y < 0 || head.y >= rows ||
      snake.some(part => part.x === head.x && part.y === head.y)
    ) {
      clearInterval(gameInterval);
      writeLine('Game over! Press Enter to continue.');
      return;
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
      // Eat food
      food = {
        x: Math.floor(Math.random() * cols),
        y: Math.floor(Math.random() * rows)
      };
    } else {
      snake.pop();
    }

    draw();
  }

  function keyDownHandler(e) {
    switch (e.key) {
      case 'ArrowUp':
        if (dy === 1) break;
        dx = 0; dy = -1;
        break;
      case 'ArrowDown':
        if (dy === -1) break;
        dx = 0; dy = 1;
        break;
      case 'ArrowLeft':
        if (dx === 1) break;
        dx = -1; dy = 0;
        break;
      case 'ArrowRight':
        if (dx === -1) break;
        dx = 1; dy = 0;
        break;
      case 'Escape':
        endGame();
        break;
    }
  }

  function endGame() {
    clearInterval(gameInterval);
    window.removeEventListener('keydown', keyDownHandler);
    terminal.innerHTML = '';
    initTerminal();
  }

  dx = 1; dy = 0; // start moving right
  draw();
  gameInterval = setInterval(update, 150);

  window.addEventListener('keydown', keyDownHandler);
}

enterScreen.onclick = () => {
  enterScreen.classList.add('fadeOut');
  enterScreen.addEventListener('animationend', () => {
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    }
    enterScreen.style.display = 'none';
    initTerminal();
  });
};
</script>
</body>
</html>
